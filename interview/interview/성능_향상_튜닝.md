# 데이터가 너무 많을 때 조회 속도 높이려면?
- 저장 시
  - 파티셔닝 전략(ex.날짜별)
  - 테이블 구조변경
  - 키 전략
  - 인덱스 설계
- 조회 시
  - 병렬 조회
  - 정규화 비정규화(역정규화)
  - 쿼리 최적화
  - 캐싱
- 기타
  - 백업, 복구 전략
  - 데이터 마이그레이션 테스트
  - 스케일 아웃 아키텍쳐

# 디바이스에서 서버 호출 흐름, 특정 디바이스나 메뉴에서 부하가 많이 걸린다면? 
- HTTP, Web server, Application server, DB
  - 프로토콜 http://
  - 호스트(도메인):포트 localhost:8080
  - 애플리케이션 컨텍스트(path)
  - API버전 /v1
  - 리소스 /notes
  - 파라미터 /{id}
- DNS, LB, CDN, DB Replication, NoSql
- Web server
  - 리버스 프록시, 엔드포인트 통일, 라우팅 
- MSA
  - 부하많은 API만 별도 장비로 빼서 서비스
  - 공통기능(인증인가, 로그인), 복잡성 등 트레이드오프
  - 비동기 처리
  - DB 저장외 메세지 발행
- 트러블슈팅 예시
  - 대용량이라 마스터 복제에 오래 걸리면 슬레이브 복제도 밀리면서, 조회시 나타나지 않음


# 성능 테스트의 목적과 방법?
- 목적
  - 병목지점 판단, 비지니스 로직상 무거운 작업 판단
  - 사용자 응답시간 단축, 서버자원 최적화, 장애감지를 위한 임계치 설정
  - ***장애처리와 동일함***
    - 어떻게 감지했고, 어떻게 조치를 취했는가
- 방법
  - 부하테스트, 스트레스 테스트
  - 성능 테스트 툴, 모니터링 툴, 테스트장비
    - 스트립트 ex)초당 사용자 100명 증가 등.
      - JMeter, nGrinder
    - CPU, 메모리, 활성 스레드 분석, 응답시간 측정, 로그 수집 등
      - Jenifer, WhaTap, Pinpoint, Scouter
    - 프로덕션과 동일한 테스트 장비에서 시나리오 반복 수행
      - 최대 QPS/TPS, 최대 요청, 응답 분포도, 자원 사용량(필요 커넥션 풀), 개선 포인트 식별에 대한 리포트.
      - 개선 포인트: 병목 API, 슬로우 쿼리, 쿼리 튜닝, 중복 쿼리 제거, 인덱스 변경, DB 관계구조 개선 등
- 필수 포함 내용
  - 서버스펙
    - OS, DB version, 테스트 도구 및 방법, 네트워크정보, 하드웨어 정보 
  - VUser 증가 추이
    - 분 또는 조건당 순증 가상 유저 기록
  - 응답시간
    - 평균응답, 최소응답, 최대응답 기록
  - QPS, TPS
  - 예외 건수, 오류 건수
  - 자원 사용량
  - 최대 응답 API 목록
  - 슬로우 쿼리 목록 도출
  - 커넥션 풀 사이즈 도출
  - 네트워크 지연 측정
  - 개선 활동의 상세 기록(비율, 수치)
    -  기본 사양 테스트 이후 어느정도 개선되었는가
    -  병목 구가은 어디인가
    -  응답시간 분포는 어느 수준인가
