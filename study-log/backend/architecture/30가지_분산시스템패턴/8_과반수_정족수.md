# 목표
- 모든 의사 결정에서 과반의 동의를 요구해 두 그룹의 서버가 독립적으로 결정을 내리는 상황을 방지한다

# 문제
- 너무 많이 기다리면 응답이 느려져 활동성이 떨어지고, 너무 적게 기다리면 갱신 손실이 생겨 안전성이 깨질 수 있다.
- 그래서 성능(진행/응답성) 과 무결성(정확/일관성) 사이에서 적절한 균형을 잡는 것이 중요하다 -> 정족수

# 정족수
- 클러스터 내 과반수 노드(n/2 + 1) 가 갱신을 확인하면 해당 갱신이 완료되었다고 간주하는 방식
- 사용처
  - 데이터 갱신 시 일관성 보장(하이 워터마크로 과반수 서버에 반영된 데이터만 노출)
  - 리더 선출(과반수 투표를 받은 경우에만 리더로 선출)
- 연구 결과에 따르면 합의 기반 시스템은 서버 수가 5대를 넘으면 쓰기 처리량 저하가 뚜렷해진다. 또한 서버를 하나 추가한다고 항상 내결함성이 증가하는 것도 아니다(예: 3→4대)
  -  이러한 트레이드오프를 고려할 때, 실제 많은 정족수 기반 시스템은 3대 또는 5대 클러스터를 선택한다.

# 탄력적 정족수
- 자주 발생하는 연산에는 더 작은 정족수를 써서 성능을 올릴 수 있다.
- Paxos/복제 로그처럼 2단계(phase) 구조에서는 빈도가 낮은 단계(예: 리더 선출)에 더 큰 정족수를 쓰고, 빈도가 높은 일반 클라이언트 연산에는 더 작은 정족수를 사용해 전체 성능을 개선할 수 있다
