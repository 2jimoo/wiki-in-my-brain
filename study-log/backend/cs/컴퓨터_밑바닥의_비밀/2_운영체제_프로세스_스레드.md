# CPU
- 2가지 기능만 수행
  - instruction dispatch
  - execute
- Program counter
  - 메모리에 저장된 명령어 주소가 저장되는 레지스터
  - 기본적으로 1씩 증가
  - if-else, 함수 등 만나면 대상 주소로 이동
  - 최초에는 main함수에 대응하는 첫번째 기계명령어의 주소

# 멀티태스킹
- 프로그램간 CPU의 전환빈도가 충분히 빠르다면 동시에 실행되는것처럼 동작
- 프로세스
  - 프로그램 실행상태(context)를 저장하고 복구할 때 사용하는 구조체
- 운영체제
  - 프로그램 적재, 멀티태스킹 등의 기능 프로그램 모음

# 프로세스
- process address space
  - 표준적인 메모리크기를 독점적으로 사용
    - 코드 영역: 코드 컴파일하여 생성된 기계명령어
    - 데이터 영역: 전역변수 등
    - 힙 영역: malloc함수에게 할당/회수하는 메모리
    - 스택 영역: 함수의 실행시간 스택
- 멀티프로세스 프로그래밍
  - 독립적인 함수 각각을 프로세스에 실행시켜, 순차실행보다 빠름
  - 프로세스 생성시 오버헤드, 프로세스간 통신 복잡

# 스레드
- 프로세스의 단점
  - 집입함수가 main함수 하나밖에 없어, 프로세스의 기계명령어를 한번에 하나의 CPU에서만 실행가능
- 실행흐름 생성 및 제어
  - PC 레지스터는 다른 어떤 함수라도 가리키게 할 수 있음
    - 하나의 프로세스테 진입함수가 2개 이상 가능
    - CPU 코어만큼 한 프로세스의 명령어 동시 실행 가능
      - 단일 코어에서도 멀티스레드 가능
      - 스레드는 OS의 추상화 단위이므로, 실제 물리코어 갯수와 무관
      - CPU도 어떤 스레드에 속한 기계명령어인지 구분X
  - 실행흐름이 동일한 프로세스 주소공간을 공유하므로 통신비용X
    - 스레드간 변수 직접 접근 가능
    - 상호배제, 동기화등으로 공유 리소스 문제 해결 필요
   
# 멀티스레드와 메모리 구조
- 스레드와 CPU의 관련성
  - PC레지스터에 스레드의 진입함수 주소를 지정하면 해당 스레드를 실행시킬 수 있다.
  - 스레드 생성 시 진입함수를 지정해야하는 이유
- 함수 실행에 필요한 정보
  - 매개변수, 지역변수, 반환주소 등 자신만의 스택 영역
  - 스택프레임에 저장
  - LIFO(스택)로 증감
- 스레드 활용 예
  - 긴 작업
    - 전용 스레드한테 담당시킴
  - 짧은 작업
    - 만들었다 해제했다하면 오히려 낭비
    - 스레드풀로, 고정 워커 재사용
    - producer-consumer pattern
   
# 프로세스와 스레드의 차이점은 무엇인가?
- 
