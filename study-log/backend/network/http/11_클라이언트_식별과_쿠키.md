# 개인화된 서비스 - 사용자 식별
- HTTP 헤더들
  - From: 사용자 이메일, 크롤러의 항의할 곳
  - User-Agent: 사용자 브라우저(+운영체제)정보
  - Referer: 사용자 유입 페이지 Url, 식별은 못하지만 패턴 파악에 용이 
- IP
  - 사용자가 아닌 컴퓨터 식별
  - 동적IP, NAT, 프록시 등의 문제 
- 로그인 인증
  - 비밀번호, 토큰 Authorization 헤더
- 뚱뚱한 URL
  - URL의 시작이나 끝에 상태정보/사용자 식별번호 추가
  - 못생기고, 공유 못하고, 캐싱 못하고, 서버 부하 가중하고, 해당 세션을 이탈하기 쉽고 지속이 안 됨
- 쿠키
 

# 쿠키
- 캐시와 충돌 가능하니 쿠키 내용은 캐싱하지 않는다
- 타입
  - session cookie
    - 사용자가 사이트 탐색하는 동안만 설정/선호 저장, 브라우저 닫으면 삭제 됨
    - Discard가 설정되어있거나 Expires/Max-Age가 없으면 세션쿠키 
  - persistent cookie
    - 디스크 저장, 로그인/자주 방문 사이트 설정 유지
- 동작
  - 키=밸류 리스트 형태
  - Set-Cookie, Set-Cookie2를 응답헤더에 기술하고 사용자에게 전달
  - 사용자는 요청 때마다 쿠키 함께 전송(클라이언트측 상태, HTTP 상태 관리 체계)  
- 저장 및 전송
  - 브라우저마다 다르게 저장
  - 사이트 마다 다름, 모든 쿠키 보내지 않음
    - Domain 속성
      - 어떤 사이트가 쿠키를 읽을 수 있는가
    - Path 속성
      - 특정 경로의 페이지만 쿠키 전달
- 구성요소
  - Version0
    - Set-cookie 응답헤더, Cookie 요청헤더
    - 키=밸류 리스트에 옵션을 세미콜론으로 이어붙임(Expires, Domain, Path, Secure-SSL 시용할 때만 쿠키 전송)
  - Version1
    - 잘 안 쓰임
    - 쿠키의 설명문 추가(Comment, CommentUrl), 브라우저 닫히면 강제삭제(Discard), Max-Age, Port속성 추가.. 등의 업데이트

# Version1 헤더
- Cookie 헤더
  - Domain, Path, port 등의 속성 기준 현재 사이트에 맞는 필터 함께 응답
- Cookie2 헤더
  - 쿠키 버전 협상용 헤더
  - 새로운 형식 쿠키를 인식하면 Cookie2에 대한 대답으로 Set-Cookie2헤더 응답
 

# 세션 추적, 캐싱
- 사용자 식별 정보 포함한 틀랜잭션 수행
- 다른 사용자에게 할당되거나 개인정보 유출 위험있으므로 캐싱X
