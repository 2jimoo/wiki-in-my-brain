# 내용 협상
- 하나의 url이 여러가지 리소스 중 적합한 것 반환하도록 하는 작업
- 언어 등이 다를 때, variant


# 클라이언트 주도 협상
- 클라이언트가 요청을 보내면 서버가 선택지를 주고 클라이언트가 선택
  - 선택지 표현: HTML, 300 Multiple choices
- 서버 구현 쉽고, 클라이언트 최선의 선택 가능
- 최소 2회 요청해서 대기 시간 긺

# 서버 주도 협상
- 서버가 클라이언트 요청의 헤더 검증해서 어떤 버전 제공할지 결정
  - Accept-XXX, User-Agent <-> Content-XXX
- 이 외의 헤더로 협상하는 경우
  - 캐시 등에게 서버가 Vary 헤더로 어떤 헤더 참고해서 협상 중인지 전달
- 선호 우선순위(quality value, q값)
- HTTP가 매커니즘 제공, 클라이언트 주도 방식보다는 빠름

# 투명 협상
- 캐시 프락시는 클라이언트의 기대가 무엇인지 알고 있고 서버로부터는 Vary 헤더받아 어떤 헤더로 협상 중인지 아는 상태
  - 캐시의 variant와 새 요청의 vary값이 동일해야함
- 트랜스 코딩
  - 클라이언트 요구에 맞는 문서가 없으면 기존 문서 약간 변환가능
  - 포맷 변환, 정보 합성, 콘텐츠 주입 등
  - 정적으로 미리 생성해놓기(시간 낭비)와 투명협상(자원 낭비) 트레이드 오프 존재 
