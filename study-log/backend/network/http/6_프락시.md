# 개요
- 프락시와 웹 데이트웨이의 차이
- 네트워크상에서 어떻게 배치되어있는가
- 브라우저에서 프락시를 사용하는 법
- 일련의 프락시를 통과하는 메세지의 경로를 Via 헤더와 TRACE 메서드로 기록하는 법
- 프락시에 기반한 HTTP 접근제어
- 어떻게 클라이언트와 서버 사이 각각 다른 기능과 버전들을 지원하면서 상호작용하는가

# 프락시
- 공유 프락시, 개인 프락시
- 게이트웨이와의 차이점
  - 프락시는 같은 프로토콜을 사용하는 둘 이상의 애플리케이션 연결 
  - 게이트웨이는 서로 다른 프로토콜을 사용하는 둘 이상의 애플리케이션 연결
  - 차이 모호, 종종 보안을 위해 프로토콜 변환을 하기도 하기 때문
- 왜 사용하는가
  - 어린이 필터, 문서 접근 제어자, 보안 방화벽, 웹 캐시, 리버스 프록시, 콘텐츠 라우터, 트랜스 코더(본문 포맷 수정), 익명화(신원 식별 필드 제거)
 
# 어디에 위치하는가
- Egress 프락시
  - 해커, 인터넷 요금 및 성능 개선, 콘텐츠 필터링
- 접근(입구) 프락시
  - 고객의 요청 모아서/종합적으로 처리 
- 리버스 프락시
  - 웹 서버로 향하는 모든 요청처리, 필요할 때만 요구
  - 스스로를 웹 서버의 이름과 IP주소로 위장
- 네트워크 교환 프록시
  - 캐시 등으로 인터넷 혼잡제어, 트래픽 감시
  - 인터넷 피어링 교환 지점


# 프록시 계층 콘텐츠 라우팅
- 전달할 프록시(부모) 선정
  - 현재 부모들의 작업량 기반 부하 균형 선정
  - 지리적 인접성 기반 선정
  - 프로토콜/타입 라우팅(특정 종류 URI는 특정 프록시로)
  - 유료 가입자용
- 트래픽 어떻게 처리해서 프락시로 향하도록 하는가?
  - 클라이언트 수정: 웹 클라이언트의 자동/수동 프락시 설정
  - 네트워크 수정: 스위칭/라우팅 장치의 트래픽 가로채기
  - DNS 이름 공가 수정: 리버스 프록시는 웹서버의 이름과 IP주소를 자신이 직접 수정한다
  - 웹 서버 수정: 서버의 리다이렉션 명령 받으면, 즉시 클라이언트와 프락시간 트랜잭션 시작


# 클라이언트 프락시 설정
- 수동 설정(명시적 설정)
- 브라우저 기본 설정
- 프락시 자동 설정(PAC)
  - 자바 스크립트로 URI 제공
- WPAD 프락시 발견
  - 대부분의 브라우저는 자동 설정 파일을 다운 받을 수 있는 설정 서버를 자동으로 찾아주는 웹 프락시 자동발견 프로토콜 제공
  - 성공할 때까지 각 기법 시도해봄
 
# 프락시 요청의 특징들
- 요청의 URI가 달라진다
  - 원 서버로는부분 URI 사용가능, 프록시로는 전체 URI 사용 보장하도록 함
  - 명시적인 픍시가 있으면 URI 저동 확장도 수행 안 함
- 가상 호스팅
  - 완전한 URI 또는 Host 헤더 둘 중 하나 보장
- 장애 허용을 제공해야함
  - 죽은 서버로 연결시킬 수 있음, 살아있는 서버 찾아줘야함
 
# 메세지 추적
- Via 헤더 
  - 메세지가 지나는 각 중간노드(프락시, 게이트웨이) 정보 나열
- TRACE 메소드
  - 어떤 프락시가 어떻게 요청을 수정했는가
- Max-Forwards 헤더
  - 이 TRACE 요청이 앞으로 몇 hop 전달될 수 있는가
  - 소진되면 원서버가 아니어도 이 TRACE 메세지를 반환해야함

# 상호 운용성
- 이해할 수 없는 헤더는 가공하거나 삭제하지 않고, 상대적 순서도 유지한다
- OPTIONS
  - 웹서버의 특정 리소스가 어떤 기능을 지원하는가
- Allow 헤더
  - 지원되는 모든 메서드 열거  
